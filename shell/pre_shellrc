export LANGUAGE=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export LC_CTYPE=en_US.UTF-8
export LANG=en_US.UTF-8

export HISTFILESIZE=10000  # max size in history file, e.g. ~/.bash_history
export HISTSIZE=1000  # max size in command `history`
export HISTCONTROL=ignoreboth  # same as ignorespace:ignoredups

alias grep='grep --color=auto'

PATHAPPEND() {
    if [ -d "$1" ] && [[ ":$PATH:" != *":$1:"* ]]; then
        PATH="${PATH:+"$PATH:"}$1"
    fi
}
PATHAPPEND "$HOME/bin"

SESSION_TYPE=local
if [ -n "$SSH_CLIENT" ] || [ -n "$SSH_TTY" ]; then
    SESSION_TYPE="remote-ssh"
else
    case $(ps -o comm= -p "$PPID") in
        sshd|*/sshd) SESSION_TYPE="remote-ssh";;
    esac
fi

# MISC
alias c='clear'
alias v='vim'

# git
alias g='git'
alias gpristine='git reset --hard && git clean -dfx'
alias cdgitroot='cd $(git rev-parse --show-cdup)'

# tmux
if command -v tmux &> /dev/null; then
    function t() {
        if [ $# -eq 1 ]; then
            tmux attach-session -t $1 2> /dev/null || tmux new-session -s $1
        elif [ $# -eq 0 ]; then
            tmux attach-session -t 0 2> /dev/null || tmux new-session -s 0
        fi
    }
    alias tk='tmux kill-session -at 0'
    alias tl='tmux list-sessions'
    alias ta='tmux attach-session -t'
    alias tn='tmux new-session -s'
fi

# exa
if command -v exa &> /dev/null; then
    alias exa='exa --group-directories-first -1'
    alias e='exa -l --no-time'
    alias em='exa -l --header --modified --sort=modified --time-style=long-iso'
    alias ec='exa -l --header --created --sort=created --time-style=long-iso'
    alias ea='exa -l --header --group --modified --created --time-style=long-iso'
    alias e2='exa --tree --level=2'
    alias e3='exa --tree --level=3'
fi







# Use rg (ripgrep) as fzf's **<TAB> / CTRL-T backend
if command -v rg &> /dev/null; then
    export FZF_DEFAULT_COMMAND="rg --files --no-ignore --hidden --follow --glob '!{.git,.repo,.CMVolumes}/*' 2> /dev/null"
    export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
fi
