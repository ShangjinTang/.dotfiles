export LANGUAGE=en_US.UTF-8
export LC_ALL=en_US.UTF-8
export LC_CTYPE=en_US.UTF-8
export LANG=en_US.UTF-8

export HISTFILESIZE=10000  # max size in history file, e.g. ~/.bash_history
export HISTSIZE=1000  # max size in command `history`
export HISTCONTROL=ignoreboth  # same as ignorespace:ignoredups

alias grep='grep --color=auto'

if [ -d "$HOME/bin" ]; then
    export PATH="$PATH:$HOME/bin"
fi

# Proxy (V2Ray)
if [ -f ~/.proxy_ip ]; then
    export PROXY_IP=$(cat ~/.proxy_ip)
else
    export PROXY_IP="127.0.0.1:1080"
fi
alias setproxy="export https_proxy=http://$PROXY_IP http_proxy=http://$PROXY_IP all_proxy=socks5://$PROXY_IP"
alias unsetproxy='unset https_proxy http_proxy all_proxy'
# setproxy by flag file
if [ -f ~/.dotfiles.local/.flag.proxy ]; then
    setproxy
else
    unsetproxy
fi

# Git
alias g='git'
alias gpristine='git reset --hard && git clean -dfx'
alias cdgitroot='cd $(git rev-parse --show-cdup)'

# TMUX
if command -v tmux &> /dev/null; then
    function t() {
        if [ $# -eq 1 ]; then
            tmux attach-session -t $1 2> /dev/null || tmux new-session -s $1
        elif [ $# -eq 0 ]; then
            tmux attach-session -t 0 2> /dev/null || tmux new-session -s 0
        fi
    }
    alias tk='tmux kill-session -at 0'
    alias tl='tmux list-sessions'
fi








# Use rg (ripgrep) as fzf's **<TAB> / CTRL-T backend
if command -v rg &> /dev/null; then
    export FZF_DEFAULT_COMMAND="rg --files --no-ignore --hidden --follow --glob '!{.git,.repo,.CMVolumes}/*' 2> /dev/null"
    export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"
fi
